# 旅摩·车载按摩椅小程序

一个专为车载按摩椅设计的微信小程序，提供智能按摩服务、设备连接、用户管理等功能。

## 项目概述

### 功能特性
- 🚗 **设备连接**: 蓝牙连接车载按摩椅设备
- 💆‍♀️ **按摩服务**: 多种按摩模式和个性化设置
- 📱 **实时控制**: 按摩过程中的实时调节和监控
- 📊 **数据记录**: 按摩历史记录和数据分析
- 👤 **用户管理**: 个人资料和偏好设置
- 🔐 **安全认证**: 微信授权登录和数据安全

### 技术架构
- **前端**: 微信小程序原生开发
- **后端**: 腾讯云开发 CloudBase
- **数据库**: 云开发数据库 (MongoDB)
- **云函数**: Node.js 16.13
- **存储**: 云开发云存储

## 项目结构

```
├── miniprogram/                 # 小程序前端代码
│   ├── pages/                   # 页面文件
│   │   ├── index/              # 首页 - 设备状态和快速操作
│   │   ├── auth/               # 认证页面
│   │   │   ├── login/          # 登录页面
│   │   │   └── confirm/        # 授权确认页面
│   │   ├── connect/            # 设备连接页面
│   │   ├── service/            # 服务选择页面
│   │   ├── massage/            # 按摩进行页面
│   │   ├── history/            # 历史记录页面
│   │   └── user/               # 个人中心页面
│   ├── styles/                 # 样式文件
│   │   └── theme/              # 主题样式
│   ├── images/                 # 图片资源
│   ├── app.js                  # 小程序入口文件
│   ├── app.json                # 小程序配置文件
│   └── app.wxss                # 全局样式文件
├── cloudfunctions/             # 云函数
│   ├── getOpenId/              # 获取用户OpenID
│   └── massageRecord/          # 按摩记录管理
├── project.config.json         # 项目配置文件
├── cloudbaserc.json           # 云开发配置文件
└── README.md                  # 项目说明文档
```

## 云开发资源

### 环境信息
- **环境ID**: `sands-0guvvxuy305fdeff`
- **环境别名**: `sands`
- **地域**: `ap-shanghai`
- **套餐**: 个人版

### 数据库集合
- **massage_records**: 按摩记录数据
  - 字段: userId, serviceId, serviceName, startTime, endTime, duration, status, settings等

### 云函数
- **getOpenId**: 获取用户微信OpenID，用于用户身份识别
- **massageRecord**: 按摩记录的增删改查操作

### 静态资源
- **域名**: `sands-0guvvxuy305fdeff-1353741773.tcloudbaseapp.com`
- **用途**: 存储小程序图片资源和静态文件

## 开发环境配置

### 前置要求
- 微信开发者工具
- Node.js 16+
- 腾讯云开发账号

### 本地开发
1. 克隆项目到本地
2. 使用微信开发者工具打开项目
3. 配置云开发环境ID
4. 编译并预览小程序

### 云函数部署
```bash
# 使用云开发CLI部署
npm install -g @cloudbase/cli
tcb login
tcb fn deploy --name getOpenId
tcb fn deploy --name massageRecord
```

## 最新更新 - Tesla风格用户中心模块

### v1.2.0 - Tesla风格用户中心完整重构 (2025-06-08)

#### 🎨 设计风格全面升级
- **Tesla风格界面**: 参考Tesla车载系统和Figma设计，采用深色主题和玻璃拟态效果
- **个人中心页面**: 全新的用户信息展示，包含头像、昵称、会员等级、账户余额等
- **使用记录页面**: 时间轴式的历史记录展示，支持筛选和详情查看
- **优惠券页面**: 卡片式优惠券展示，分类管理未使用、已使用、已过期券
- **设置页面**: 分组式设置项，包含通知、隐私、应用设置等完整功能

#### 🔧 功能模块完善
- **个人中心功能**:
  - 用户头像、昵称、会员等级展示
  - 账户余额、积分信息展示
  - 功能入口：使用记录、优惠券、设置等
  - 编辑个人资料入口

- **使用记录管理**:
  - 按时间倒序列出历史按摩订单
  - 记录详情：服务模式、时长、金额、时间、设备ID
  - 按日期/月份筛选功能
  - 消费总览统计（本月消费、总消费）

- **优惠券系统**:
  - "未使用"、"已使用"、"已过期"分类展示
  - 优惠券面额、使用条件、有效期清晰展示
  - 优惠券兑换码输入功能
  - 领取新优惠券的活动入口

- **设置中心**:
  - 通知设置：优惠活动、服务完成、设备状态通知开关
  - 隐私设置：数据分析、个性化推荐开关
  - 应用设置：语言切换、主题切换、缓存清理
  - 帮助支持：关于我们、意见反馈、使用帮助、联系客服
  - 系统功能：检查更新、隐私政策、服务条款
  - 账户操作：退出登录

## 联系方式

如有问题或建议，请联系开发团队。

---

**版本**: v1.2.0  
**更新时间**: 2025-06-08  
**开发团队**: 旅摩科技